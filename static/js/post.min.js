document.addEventListener("DOMContentLoaded",function(){fetchPostData(),document.getElementById("like-button").addEventListener("click",function(){isAuthenticated?fetch(`/posts/${postID}/like`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{document.getElementById("like-count").textContent=e.likes}):(window.location.href="/signin",console.log("user not logged in"))}),document.getElementById("comment-form").addEventListener("submit",function(e){if(isAuthenticated){e.preventDefault();let t=document.getElementById("comment-content").value;fetch(`/posts/${postID}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})}).then(e=>e.json()).then(e=>{document.getElementById("comments").innerHTML+=`
    <div class="comment">
        <p><strong>${e.user_name}</strong>: ${e.content}</p>
    </div>
`,document.getElementById("comment-form").reset()})}else window.location.href="/signin",console.log("user not logged in")})});function fetchPostData(){fetch(`/posts/${postID}`).then(e=>e.json()).then(e=>{document.getElementById("like-count").textContent=e.likes;let t=document.getElementById("comments");t.innerHTML="",e.comments.forEach(e=>{t.innerHTML+=`
    <div class="comment">
        <p><strong>${e.author}</strong>: ${e.content}</p>
    </div>
`})})}